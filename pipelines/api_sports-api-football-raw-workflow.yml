main:
  params: []
  steps:
    - retrieveAndStoreFootballData:
        call: http.get
        args:
          url: https://apisports-api-football-raw-service-76117246159.europe-north1.run.app
          query:
            venue_id: 1506 # Id of Tele2 Arena
            limit: 40
        result: PipelineResponse
    - validatePipelineResponse:
        switch:
          - condition: ${PipelineResponse.body.status_code == 200}
            steps:
              - workflow_end:
                  return: 'Workflow executed successfully'
          - condition: ${PipelineResponse.body.status_code != 200}
            steps:
              - handleError:
                  raise: '${"Error in workflow execution: " + PipelineResponse.content.message}'